---
layout: default
title: Home
---

<ion-card id="user-signed-in">
  <img class="profil_img" id="userImg" alt="user image" src="https://ionicframework.com/docs/img/demos/card-media.png" />
  <ion-card-header>
    <ion-card-title id="user-display-name">Card Title</ion-card-title>
    <ion-card-subtitle id="user-email">Card Subtitle</ion-card-subtitle>
  </ion-card-header>

  <ion-card-content>
    {{site.title}}
  </ion-card-content>
<ion-footer>
  <ion-toolbar>
<ion-button expand="full" id="sign-out-button" color="danger"><ion-icon name="log-out-outline"></ion-icon> Log Out</ion-button>
  </ion-toolbar>
</ion-footer>
</ion-card>

<script type="module">
 const firebaseConfig = {
 apiKey: "{{ site.API_KEY }}",
 authDomain: "{{ site.AUTH_DOMAIN }}",
 databaseURL: "{{ site.DATABASE_URL }}",
 projectId: "{{ site.PROJECT_ID }}",
 storageBucket: "{{ site.STORAGE_BUCKET }}",
 messagingSenderId: "{{ site.SENDER_ID }}",
 appId: "{{ site.APP_ID }}",
 measurementId: "{{ site.MEASUREMENT_ID }}"
 };

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const userSignedOutDiv = document.getElementById('user-signed-out');
const userSignedInDiv = document.getElementById('user-signed-in');
const userDisplayName = document.getElementById('user-display-name');
const userEmail = document.getElementById('user-email');
const signOutButton = document.getElementById('sign-out-button');

function toggleUI() {
    if (auth.currentUser) {
        userDisplayName.textContent = auth.currentUser.displayName;
        userEmail.textContent = auth.currentUser.email;

        if (auth.currentUser.photoURL) {
            document.querySelector('#userImg').src = auth.currentUser.photoURL;
        }
    } else {
        location.href = "{{site.baseurl}}/";
    }
}

import { alertController } from '{{ "/assets/frameworks/@ionic/core/dist/ionic/index.esm.js" | relative_url }}';

signOutButton.addEventListener('click', async () => {
    const alert = await alertController.create({
        header: 'Konfirmasi',
        message: 'Apakah Anda yakin ingin keluar?',
        buttons: [
            {
                text: 'Batal',
                role: 'cancel',
                handler: () => {
                    console.log('Aksi dibatalkan');
                },
            },
            {
                text: 'Ya',
                handler: () => {
                    console.log('Aksi dikonfirmasi');
                    auth.signOut().then(() => {
                        console.log('User signed out');
                        location.href = "{{site.baseurl}}/"; // Redirect setelah logout
                    }).catch(error => {
                        console.error('Error saat logout:', error);
                    });
                },
            },
        ],
    });

    await alert.present();
});

auth.onAuthStateChanged(user => {
    toggleUI();
});
</script>